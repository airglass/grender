{"version":3,"sources":["webpack://grender/webpack/universalModuleDefinition","webpack://grender/webpack/bootstrap","webpack://grender/webpack/runtime/define property getters","webpack://grender/webpack/runtime/hasOwnProperty shorthand","webpack://grender/webpack/runtime/make namespace object","webpack://grender/./src/Glass.ts","webpack://grender/./src/Group.ts","webpack://grender/./src/Renderer.ts","webpack://grender/./src/Grender.ts","webpack://grender/./src/Renderable.ts","webpack://grender/./src/Keyframes.ts","webpack://grender/./src/Effect.ts","webpack://grender/./src/Progress.ts","webpack://grender/./src/AlterProgress.ts","webpack://grender/./src/main.ts"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","Glass","params","this","isMouseDown","element","subscribers","event","DPR","window","devicePixelRatio","setStyleSize","width","height","style","setAttrSize","emitSubscribers","originEvent","forEach","subscriber","subscribe","push","Group","children","add","child","_this","slice","arguments","remove","i","splice","name","_i","_a","length","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","TypeError","String","__","constructor","create","_super","Renderer","scene","setSize","position","top","left","clear","ctx","getContext","clearRect","canvas","render","draw","reRender","getElementsContainPoint","point","map","el","isPointInPath","path","x","y","filter","Grender","rendererManager","_eventHandler","bind","bounds","getBounds","_setInteractable","getScrollOffsets","pageXOffset","pageYOffset","getViewportSize","w","innerWidth","innerHeight","bcr","getBoundingClientRect","right","bottom","centerX","centerY","addRenderer","rendererName","document","createElement","renderer","appendChild","addEventListener","e","touch","touches","type","interactor","layerX","layerY","clientX","clientY","Renderable","line","fill","stroke","userData","init","Keyframes","initialized","generateEmptyFrames","frameWidth","frameHeight","frameCounts","frames","frame","fromImage","imageUrl","cb","image","Image","onload","drawImage","setFrames","src","fromFrames","currentFrameIndex","updateFrames","frameProcessor","drawFrame","drawX","drawY","getSprite","sprite","spriteCtx","Effect","keyframes","locate","halfBoundWidth","halfBoundHeight","Progress","startValue","endValue","t","step","valueLength","getValue","drive","AlterProgress","extend","extendedGlass","_constructor","foo"],"mappings":"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","file":"grender.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grender\"] = factory();\n\telse\n\t\troot[\"grender\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var Glass = /** @class */ (function () {\n    function Glass(params) {\n        this.isMouseDown = false;\n        this.element = params.element;\n        this.subscribers = [];\n        this.event = {};\n        this.DPR = params.DPR || window.devicePixelRatio;\n    }\n    Glass.prototype.setStyleSize = function (width, height) {\n        this.element.style.width = width + \"px\";\n        this.element.style.height = height + \"px\";\n    };\n    Glass.prototype.setAttrSize = function (width, height) {\n        this.element.width = width;\n        this.element.height = height;\n    };\n    Glass.prototype.emitSubscribers = function (event, originEvent) {\n        this.subscribers.forEach(function (subscriber) { return subscriber(event, originEvent); });\n    };\n    Glass.prototype.subscribe = function (subscriber) {\n        this.subscribers.push(subscriber);\n    };\n    return Glass;\n}());\nexport default Glass;\n","var Group = /** @class */ (function () {\n    function Group() {\n        this.children = [];\n    }\n    Group.prototype.add = function (child) {\n        var _this = this;\n        var children = [].slice.call(arguments, 0);\n        children.forEach(function (child) {\n            _this.children.push(child);\n        });\n        return children;\n    };\n    Group.prototype.remove = function (child) {\n        for (var i in this.children) {\n            if (child === this.children[i]) {\n                return this.children.splice(+i, 1)[0];\n            }\n        }\n    };\n    Group.prototype.get = function (name) {\n        var children = [];\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child.name && child.name === name) {\n                children.push(child);\n            }\n        }\n        return children;\n    };\n    return Group;\n}());\nexport default Group;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Glass from './Glass';\nimport Group from './Group';\nvar Renderer = /** @class */ (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(params) {\n        var _this = _super.call(this, params) || this;\n        _this.scene = new Group();\n        return _this;\n    }\n    Renderer.prototype.setSize = function (width, height) {\n        this.element.style.position = 'absolute';\n        this.element.style.top = 0;\n        this.element.style.left = 0;\n        this.setAttrSize(width * this.DPR, height * this.DPR);\n        this.setStyleSize(width, height);\n    };\n    Renderer.prototype.clear = function () {\n        var ctx = this.element.getContext('2d');\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        return this;\n    };\n    Renderer.prototype.render = function () {\n        var ctx = this.element.getContext('2d');\n        for (var _i = 0, _a = this.scene.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            child.draw && child.draw(ctx);\n        }\n        return this;\n    };\n    Renderer.prototype.reRender = function () {\n        this.clear();\n        return this.render();\n    };\n    Renderer.prototype.getElementsContainPoint = function (point) {\n        var ctx = this.element.getContext('2d');\n        return this.scene.children.map(function (el) {\n            var inPath = ctx.isPointInPath(el.path, point.x, point.y);\n            if (inPath)\n                return el;\n            return;\n        }).filter(function (el) { return el; });\n    };\n    return Renderer;\n}(Glass));\nexport default Renderer;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Glass from './Glass';\nimport Renderer from './Renderer';\nimport Group from './Group';\nvar Grender = /** @class */ (function (_super) {\n    __extends(Grender, _super);\n    function Grender(params) {\n        var _this = _super.call(this, params) || this;\n        _this.width = params.width || 300;\n        _this.height = params.height || 150;\n        _this.rendererManager = new Group();\n        _this._eventHandler = _this._eventHandler.bind(_this);\n        _this.element.style.position = 'relative';\n        _this.setStyleSize(_this.width, _this.height);\n        _this.bounds = _this.getBounds();\n        _this._setInteractable();\n        return _this;\n    }\n    Grender.prototype.getScrollOffsets = function () {\n        return {\n            x: window.pageXOffset,\n            y: window.pageYOffset,\n        };\n    };\n    Grender.prototype.getViewportSize = function () {\n        var w = window;\n        return {\n            x: w.innerWidth,\n            y: w.innerHeight,\n        };\n    };\n    Grender.prototype.getBounds = function () {\n        var bcr = this.element.getBoundingClientRect();\n        var x = bcr.left;\n        var y = bcr.top;\n        var width = bcr.width || (bcr.right - bcr.left);\n        var height = bcr.height || (bcr.bottom - bcr.top);\n        var centerX = x + width / 2;\n        var centerY = y + height / 2;\n        return this.bounds = { x: x, y: y, centerX: centerX, centerY: centerY, width: width, height: height };\n    };\n    Grender.prototype.addRenderer = function (rendererName) {\n        var canvas = document.createElement('canvas');\n        var renderer = new Renderer({\n            element: canvas,\n            DPR: this.DPR\n        });\n        renderer.setSize(this.bounds.width, this.bounds.height);\n        renderer.name = rendererName;\n        this.element.appendChild(canvas);\n        return this.rendererManager.add(renderer)[0];\n    };\n    Grender.prototype._setInteractable = function () {\n        var el = this.element;\n        el.addEventListener('mousedown', this._eventHandler);\n        el.addEventListener('touchstart', this._eventHandler);\n        el.addEventListener('mousemove', this._eventHandler);\n        el.addEventListener('touchmove', this._eventHandler);\n        el.addEventListener('mouseup', this._eventHandler);\n        el.addEventListener('touchend', this._eventHandler);\n        el.addEventListener('mouseover', this._eventHandler);\n        el.addEventListener('mouseout', this._eventHandler);\n        return this;\n    };\n    Grender.prototype._eventHandler = function (e) {\n        this.event = {};\n        var touch = e.touches && e.touches[0];\n        switch (e.type) {\n            case 'mousedown':\n                this.event.interactor = 'mouse';\n                this.isMouseDown = true;\n                this.event.type = 'touchstart';\n                this.event.x = e.layerX * this.DPR;\n                this.event.y = e.layerY * this.DPR;\n                break;\n            case 'touchstart':\n                this.event.interactor = 'finger';\n                this.event.type = 'touchstart';\n                this.event.x = (touch.clientX - this.bounds.x) * this.DPR;\n                this.event.y = (touch.clientY - this.bounds.y) * this.DPR;\n                break;\n            case 'mousemove':\n                this.event.interactor = 'mouse';\n                this.event.type = 'mousemove';\n                if (this.isMouseDown) {\n                    this.event.type = 'touchmove';\n                }\n                this.event.x = e.layerX * this.DPR;\n                this.event.y = e.layerY * this.DPR;\n                break;\n            case 'touchmove':\n                this.event.interactor = 'finger';\n                this.event.type = 'touchmove';\n                this.event.x = (touch.clientX - this.bounds.x) * this.DPR;\n                this.event.y = (touch.clientY - this.bounds.y) * this.DPR;\n                break;\n            case 'mouseup':\n                this.event.interactor = 'mouse';\n                this.isMouseDown = false;\n                this.event.type = 'touchend';\n                break;\n            case 'touchend':\n                this.event.interactor = 'finger';\n                this.event.type = 'touchend';\n            case 'mouseover':\n                this.event.interactor = 'mouse';\n                this.event.type = 'mouseover';\n                break;\n            case 'mouseout':\n                this.event.interactor = 'mouse';\n                this.event.type = 'mouseout';\n                break;\n        }\n        this.emitSubscribers(this.event, e);\n    };\n    return Grender;\n}(Glass));\nexport default Grender;\n","var Renderable = /** @class */ (function () {\n    function Renderable(params) {\n        this.line = params && params.line || 1;\n        this.fill = params && params.fill || '#fff';\n        this.stroke = params && params.stroke || '#111';\n        this.userData = {};\n    }\n    Renderable.prototype.init = function () { };\n    Renderable.prototype.draw = function (ctx) { };\n    return Renderable;\n}());\nexport default Renderable;\n","var Keyframes = /** @class */ (function () {\n    function Keyframes() {\n        this.initialized = false;\n    }\n    Keyframes.generateEmptyFrames = function (frameWidth, frameHeight, frameCounts) {\n        var frames = [];\n        for (var i = 0; i < frameCounts; i++) {\n            var frame = document.createElement('canvas');\n            frame.width = frameWidth;\n            frame.height = frameHeight;\n            frames.push(frame);\n        }\n        return frames;\n    };\n    Keyframes.prototype.fromImage = function (imageUrl, frameCounts, cb) {\n        var _this = this;\n        var image = new Image;\n        image.onload = function () {\n            var frameWidth = image.width / frameCounts;\n            var frameHeight = image.height;\n            var frames = Keyframes.generateEmptyFrames(frameWidth, frameHeight, frameCounts);\n            for (var i = 0; i < frameCounts; i++)\n                frames[i].getContext('2d').drawImage(image, -i * frameWidth, 0);\n            _this.setFrames(frames);\n            _this.initialized = true;\n            cb(_this);\n        };\n        image.src = imageUrl;\n    };\n    Keyframes.prototype.fromFrames = function (frames) {\n        this.setFrames(frames);\n        this.initialized = true;\n    };\n    Keyframes.prototype.setFrames = function (frames) {\n        this.frames = frames;\n        this.frameWidth = frames[0].width;\n        this.frameHeight = frames[0].height;\n        this.frameCounts = frames.length;\n        this.currentFrameIndex = 0;\n    };\n    Keyframes.prototype.updateFrames = function (frameWidth, frameHeight, frameCounts, frameProcessor) {\n        var frames = Keyframes.generateEmptyFrames(frameWidth, frameHeight, frameCounts);\n        this.setFrames(frames);\n        for (var i = 0; i < frameCounts; i++) {\n            frameProcessor(i, this.frames[i].getContext('2d'));\n        }\n    };\n    Keyframes.prototype.drawFrame = function (ctx, drawX, drawY) {\n        ctx.drawImage(this.frames[this.currentFrameIndex], drawX, drawY);\n        this.currentFrameIndex++;\n        if (this.currentFrameIndex >= this.frameCounts)\n            this.currentFrameIndex = 0;\n    };\n    Keyframes.prototype.getSprite = function () {\n        var sprite = document.createElement('canvas');\n        sprite.width = this.frameWidth * this.frameCounts;\n        sprite.height = this.frameHeight;\n        var spriteCtx = sprite.getContext('2d');\n        for (var i = 0; i < this.frameCounts; i++) {\n            spriteCtx.drawImage(this.frames[i], this.frameWidth * i, 0);\n        }\n        return sprite;\n    };\n    return Keyframes;\n}());\nexport default Keyframes;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Renderable from \"./Renderable\";\nimport Keyframes from \"./Keyframes\";\nvar Effect = /** @class */ (function (_super) {\n    __extends(Effect, _super);\n    function Effect(params) {\n        var _this = _super.call(this, params) || this;\n        _this.keyframes = new Keyframes();\n        _this.frameCounts = params && params.frameCounts || 1;\n        _this.bounds = {\n            x: 0,\n            y: 0,\n            centerX: 0,\n            centerY: 0,\n            width: 0,\n            height: 0,\n        };\n        return _this;\n    }\n    Effect.prototype.locate = function (x, y, p) {\n        if (p === void 0) { p = 0; }\n        this.bounds.width = this.keyframes.frameWidth;\n        this.bounds.height = this.keyframes.frameHeight;\n        var halfBoundWidth = this.bounds.width / 2;\n        var halfBoundHeight = this.bounds.height / 2;\n        switch (p) {\n            case 0:\n                this.bounds.x = x - halfBoundWidth;\n                this.bounds.y = y - halfBoundHeight;\n                break;\n            case 1:\n                this.bounds.x = x;\n                this.bounds.y = y;\n                break;\n            case 2:\n                this.bounds.x = x - halfBoundWidth;\n                this.bounds.y = y;\n                break;\n            case 3:\n                this.bounds.x = x - this.bounds.width;\n                this.bounds.y = y;\n                break;\n            case 4:\n                this.bounds.x = x - this.bounds.width;\n                this.bounds.y = y - halfBoundHeight;\n                break;\n            case 5:\n                this.bounds.x = x - this.bounds.width;\n                this.bounds.y = y - this.bounds.height;\n                break;\n            case 6:\n                this.bounds.x = x - halfBoundWidth;\n                this.bounds.y = y - this.bounds.height;\n                break;\n            case 7:\n                this.bounds.x = x;\n                this.bounds.y = y - this.bounds.height;\n                break;\n            case 8:\n                this.bounds.x = x;\n                this.bounds.y = y - halfBoundHeight;\n                break;\n        }\n    };\n    Effect.prototype.draw = function (ctx) {\n        if (!this.keyframes.initialized)\n            return;\n        this.keyframes.drawFrame(ctx, this.bounds.x, this.bounds.y);\n    };\n    return Effect;\n}(Renderable));\nexport default Effect;\n","var Progress = /** @class */ (function () {\n    function Progress(startValue, endValue, t, step) {\n        this.value = this.startValue = startValue || 0;\n        this.endValue = endValue || 1;\n        (t >= 0 && t <= 1) ? (this.t = t) : (this.t = 0);\n        this.step = step || 0.1;\n        this.valueLength = this.endValue - this.startValue;\n    }\n    Progress.prototype.getValue = function (t) {\n        return this.startValue + this.valueLength * t;\n    };\n    Progress.prototype.drive = function () {\n        var value = this.getValue(this.t);\n        this.t += this.step;\n        this.t > 1 && (this.t = 0);\n        return this.value = value;\n    };\n    return Progress;\n}());\nexport default Progress;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport Progress from './Progress';\nvar AlterProgress = /** @class */ (function (_super) {\n    __extends(AlterProgress, _super);\n    function AlterProgress(startValue, endValue, t, step) {\n        return _super.call(this, startValue, endValue, t, step) || this;\n    }\n    AlterProgress.prototype.getValue = function (t) {\n        var value;\n        if (t >= 0 && t < 0.5) {\n            value = this.startValue + this.valueLength * t * 2;\n        }\n        else {\n            value = this.startValue + this.valueLength * (2 - t * 2);\n        }\n        return value;\n    };\n    return AlterProgress;\n}(Progress));\nexport default AlterProgress;\n","import Grender from './Grender';\nimport Renderable from './Renderable';\nimport Effect from './Effect';\nimport AlterProgress from './AlterProgress';\nimport Progress from './Progress';\nfunction extend(extendedGlass, prototype) {\n    var Glass = function (params) {\n        extendedGlass.call(this, params);\n        prototype._constructor && prototype._constructor.call(this, params);\n    };\n    function foo() { }\n    foo.prototype = extendedGlass.prototype;\n    Glass.prototype = new foo();\n    Glass.prototype.constructor = Glass;\n    for (var i in prototype)\n        Glass.prototype[i] = prototype[i];\n    return Glass;\n}\nexport { Grender, Progress, AlterProgress, Effect, Renderable, extend };\n"],"sourceRoot":""}